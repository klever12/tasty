<!DOCTYPE html>
<html>
    <head>
      <link rel="stylesheet" href="../css/orderPlacedTable.css" type="text/css">
      <title>Order Placed!</title>
    </head>
    <body>

        <h1>Order Placed!</h1>

        <script>
          var foodItem = [];
          var prices = [];
          var specialNote = [];
          var quantity = [];
          var table = document.createElement('table'),
              thead = document.createElement('thead'),
              tbody = document.createElement('tbody'),
              th, tr, td;


              //get the food items
              order = localStorage.getItem('theOrder');
              localStorage.removeItem('theOrder');
              order = JSON.parse(order);

              for (var i = 0; i < Object.keys(order).length; i++) {

                foodItem.push(Object.keys(order)[i]);

                prices.push(order[Object.keys(order)[i]]);
              }

              //get the quantyties and specialNotes from the main.js
              customize = localStorage.getItem('theCustomize');
              customize = JSON.parse(customize);

              for (var i = 0; i < Object.keys(order).length; i++) {

                specialNote.push(Object.keys(customize)[i]);

                quantity.push(customize[Object.keys(customize)[i]]);
              }

              table.setAttribute("id", "order");

              //header for the food items
              th = document.createElement('th');
              th.innerHTML="Food Item";
              table.appendChild(th);
              //header for the prices
              th = document.createElement('th');
              th.innerHTML="Price";
              table.appendChild(th);
              //header for the quantity
              th = document.createElement('th');
              th.innerHTML="Quantity";
              table.appendChild(th);
              //header for the special notes
              th = document.createElement('th');
              th.innerHTML="Special Notes";
              table.appendChild(th);

              table.appendChild(thead);
              table.appendChild(tbody);

              document.body.appendChild(table);

              for (var i = 0; i < foodItem.length; i++) {
                tr = document.createElement('tr');

                //add the foodItem elements to the table column
                td = document.createElement('td');
                td.innerHTML = foodItem[i];
                tr.appendChild(td);

                //add the prices to the other column of the table
                td = document.createElement('td');
                td.innerHTML = prices[i];
                tr.appendChild(td);
                tbody.appendChild(tr);

                //add the quantity to the other column of the table
                td = document.createElement('td');
                td.innerHTML = quantity[i];
                tr.appendChild(td);

                //add the specialNote to the other column of the table
                td = document.createElement('td');
                td.innerHTML = specialNote[i];
                tr.appendChild(td);
              }
        </script>

          <script>
            var total = "Total: ";
            var orderTable = document.getElementById('order');
            var orderTotal = 0;
            var table = document.createElement('table'),
                tbody = document.createElement('tbody'),
                th, tr, td;


                for (var i = 0; i < orderTable.rows.length; i++) {

                  var row = orderTable.rows[i];

                  var td = row.getElementsByTagName('td');

                  var secondCell = td[1];

                  var priceOfItem = secondCell.innerHTML;
                  priceOfItem = parseFloat(priceOfItem);

                  orderTotal = orderTotal + priceOfItem;
                }

                orderTotal = orderTotal.toFixed(2);

                table.appendChild(tbody);

                document.body.appendChild(table);

                tr = document.createElement('tr');
                td = document.createElement('td');
                td.innerHTML = total;
                tr.appendChild(td);

                td = document.createElement('td');
                td.innerHTML = orderTotal;
                tr.appendChild(td);
                tbody.appendChild(tr);

          </script>

          <!-- <h4>Paid With Meal Swipe and Flex- </h4>
          <h5>117 Swipes, 292.74 Flex Remaining</h5> -->

          <h2>Estimated Wait Time: </h2>
          <h2>27 Minutes</h2>

          <div >
            <button type="submit" id="anotherOrder">Place Another Order</button>
          </div>

          <script>

            document.getElementById('anotherOrder').addEventListener("click",
          function(){
            document.location.href = '../index.html'
          });

          </script>
    </body>
</html>
